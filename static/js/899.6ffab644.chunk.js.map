{"version":3,"file":"static/js/899.6ffab644.chunk.js","mappings":"oQAMe,SAASA,IACtB,OAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAsCF,EAAAA,EAAAA,UAAS,IAA/C,eAAOG,EAAP,KAAoBC,EAApB,KACMC,GAAWC,EAAAA,EAAAA,OAUjBC,EAAAA,EAAAA,YAAU,WACR,IAAKT,EAAaU,IAAI,SAGpB,OAFAT,EAAgB,SAChBG,EAAS,KAIXO,EAAAA,EAAAA,IAAcX,EAAaY,YAAYC,MAAK,SAAAC,GAC1C,IAAKA,EAAKA,KAAKC,QAAQC,OAGrB,OAFAC,EAAAA,EAAAA,IAAM,wBACNhB,EAAgB,IAGlBG,EAASU,EAAKA,KAAKC,cAEpB,CAACf,EAAcC,IAUlB,OACE,+BACE,kBAAMiB,SAVW,SAAAC,GACnBA,EAAEC,iBACFnB,EAAgB,IAChBK,EAAe,IACf,IAAMe,EAAiBF,EAAEG,cAAcC,OAAOC,MAAMC,OAAOC,cAC3DzB,EAAgB,CAAE0B,MAAON,KAKvB,WACE,kBACEO,SArCS,SAAAT,GACXnB,EAAaU,IAAI,UACnBT,EAAgB,IAElBG,EAAS,IACTE,EAAea,EAAEG,cAAcE,QAiCzBA,MAAOnB,EACPwB,KAAK,SACLC,KAAK,OACLC,aAAa,MACbC,YAAY,qBAEd,mBAAQF,KAAK,SAAb,oBACC3B,IAAS,SAAC,IAAD,CAAYW,KAAMX,EAAO8B,MAAO,CAAEC,KAAM3B","sources":["views/MoviesPage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useSearchParams, useLocation } from 'react-router-dom';\nimport { ApiMoviesPage } from '../ApiService/ApiService';\nimport ListMovies from 'components/ListMovies/ListMovies';\nimport { toast } from 'react-toastify';\n\nexport default function MoviesPage() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [films, setFilms] = useState([]);\n  const [searchFilms, setSearchFilms] = useState('');\n  const location = useLocation();\n\n  const onSearch = e => {\n    if (searchParams.get('query')) {\n      setSearchParams({});\n    }\n    setFilms([]);\n    setSearchFilms(e.currentTarget.value);\n  };\n\n  useEffect(() => {\n    if (!searchParams.get('query')) {\n      setSearchParams({});\n      setFilms([]);\n      return;\n    }\n\n    ApiMoviesPage(searchParams.toString()).then(data => {\n      if (!data.data.results.length) {\n        toast('Movie not found');\n        setSearchParams({});\n        return;\n      }\n      setFilms(data.data.results);\n    });\n  }, [searchParams, setSearchParams]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSearchParams({});\n    setSearchFilms('');\n    const toFormatString = e.currentTarget.search.value.trim().toLowerCase();\n    setSearchParams({ query: toFormatString });\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          onChange={onSearch}\n          value={searchFilms}\n          name=\"search\"\n          type=\"text\"\n          autoComplete=\"off\"\n          placeholder=\"Enter the title\"\n        />\n        <button type=\"submit\">Submit</button>\n        {films && <ListMovies data={films} state={{ from: location }} />}\n      </form>\n    </>\n  );\n}\n"],"names":["MoviesPage","useSearchParams","searchParams","setSearchParams","useState","films","setFilms","searchFilms","setSearchFilms","location","useLocation","useEffect","get","ApiMoviesPage","toString","then","data","results","length","toast","onSubmit","e","preventDefault","toFormatString","currentTarget","search","value","trim","toLowerCase","query","onChange","name","type","autoComplete","placeholder","state","from"],"sourceRoot":""}